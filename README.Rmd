---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# worldtimer

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/worldtimer)](https://CRAN.R-project.org/package=worldtimer)
<!-- badges: end -->

The goal of worldtimer is to provide a wrapper for [WorldTimeAPI](http://worldtimeapi.org). WorldTimeAPI is a simple web service which returns the current local time for a given timezone or IP address as either plain-text or JSON. This package makes the request and parses the response for usage in R.

## Installation

To get a bug fix or to use a feature from the development version, you can install the development version of worldtimer from [GitHub](https://github.com/mrcaseb/worldtimer) with:

```{r, eval=FALSE}
if (!require("remotes")) install.packages("remotes")
remotes::install_github("mrcaseb/worldtimer")
```

## Usage

To get a tibble of all valid timezone names run

```{r}
library(worldtimer)
worldtimer_timezones()
```

Requesting the current time from a specific timezone can be done with

```{r}
with_tz <- worldtimer("America/New_York")
```

The function returns a list of class ``r class(with_tz)``. If you print it to the console it will print a formatted time string of the queried time like this

```{r}
print(with_tz)
```

However, the object `with_tz` includes some additional information. You can check the full contents with

```{r}
str(with_tz)
```

The API returns the current time with microsecond precision but R defaults to printing no decimal digits of seconds. This can be changed by setting `options(digits.secs)`. 

```{r}
options(digits.secs = 3)
print(with_tz)

options(digits.secs = 6)
print(with_tz)
```

(Please note this option is R specific and does not do any rounding. It just cuts off the digits.)

Instead of providing a specific timezone, you can also get time for your current public ip address with

```{r}
devs_ip <- worldtimer_ip()
str(devs_ip)
```

It's also possible to provide a specific ip address, e.g. the following public ip of a DNS server in Osaka, Japan

```{r}
ip_in_japan <- worldtimer_ip("101.110.34.62")
str(ip_in_japan)
```

## FAQ

For more information, please visit the [FAQ page of WorldTimeAPI](http://worldtimeapi.org/pages/faqs).
